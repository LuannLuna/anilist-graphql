fragment NameInfo on MediaTitle {
  english
  native
  romaji
}

fragment Pagination on PageInfo {
  currentPage
  total
  hasNextPage
}

fragment BaseAnimeInfo on Media {
  id
  title {
    ...NameInfo
  }
  coverImage {
    extraLarge
    color
  }
  meanScore
  genres
  episodes
  meanScore
  format
  popularity
}

fragment DetailAnimeInfo on Media {
  description
  chapters
  status
  startDate {
    day
    month
    year
  }
  endDate {
    day
    month
    year
  }
  characters {
    nodes {
      id
      name {
        alternative
        full
      }
      age
      gender
      image {
        large
      }
      description
      media {
        nodes {
          staff {
            nodes {
              id
              name {
                full
              }
              image {
                large
              }
              description
              primaryOccupations
              age
              languageV2
              
            }
          }
        }
      }
    }
  }
  bannerImage
  nextAiringEpisode {
    airingAt
    episode
    timeUntilAiring
    media {
      bannerImage
    }
  }
  relations {
    nodes {
      id
      title {
        ...NameInfo
      }
      coverImage {
        extraLarge
      }
    }
  }
}

query AllAnnimes($page: Int) {
  Page(page: $page) {
    pageInfo {
      ...Pagination
    }
    media{
      ...BaseAnimeInfo
    }
  }
}

query FindAnime($search: String, $page: Int) {
  Page(page: $page) {
    pageInfo {
        ...Pagination
    }
    media(search: $search) {
        ...BaseAnimeInfo
    }
  }
}

query FetchDetail($mediaId: Int) {
  Page {
    media(id: $mediaId) {
      ...BaseAnimeInfo
      ...DetailAnimeInfo
    }
  }
}
